@inherits Umbraco.Web.Mvc.UmbracoViewPage<Stoolball.Web.Metadata.IHasViewMetadata>
@using ClientDependency.Core.Mvc
@using Stoolball.Navigation
@{
    Layout = null;
    Html.RequiresCss("~/css/base.css", 1);
    Html.RequiresJs("~/js/libs/purify.min.js", 1);
    Html.RequiresJs("~/js/trusted-types-policy.js", 2);
    Html.RequiresJs("~/js/register-service-worker.js", 2);
    Html.RequiresJs("~/scripts/jquery-3.5.1.min.js", 3); // full jQuery rather than slim is required for jQuery autocomplete
    Html.RequiresJs("~/scripts/bootstrap.bundle.min.js", 4);
    Html.RequiresJs("~/js/consent.js", 20);
    Html.RequiresJs("~/js/google-analytics.js", 21);
    if (!string.IsNullOrEmpty(Model.Stylesheet))
    {
        Html.RequiresCss($"~/css/{Model.Stylesheet}.min.css");
    }

    if (Model.Breadcrumbs.Count() == 0)
    {
        var breadcrumb = Umbraco.AssignedContentItem.Parent;
        while (breadcrumb != null)
        {
            Model.Breadcrumbs.Insert(0, new Breadcrumb { Name = breadcrumb.Name, Url = new Uri(breadcrumb.Url(), UriKind.Relative) });
            breadcrumb = breadcrumb.Parent;
        }
    }
}
<!DOCTYPE html>
<html dir="ltr" lang="en" data-analytics="@System.Configuration.ConfigurationManager.AppSettings["GoogleAnalyticsMeasurementId"]">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@Model.Metadata.PageTitle – Stoolball England</title>
    @if (!string.IsNullOrWhiteSpace(Model.Metadata.Description))
    {
        <meta name="description" content="@Model.Metadata.Description" />
    }
    <link rel="manifest" href="~/Status/offline.json" />
    <link rel="icon" type="image/svg+xml" href="~/images/logos/stoolball-england-icon.svg" />
    <link rel="alternate icon" href="~/favicon.ico" />
    @RenderSection("head", false)
    @Html.RenderCssHere()
</head>
<body>
    @Html.Partial("_Header")
    <main>
        @Html.Partial("_Breadcrumb", Model.Breadcrumbs)
        @RenderBody()
    </main>
    @Html.Partial("_Footer")
    @Html.RenderJsHere()
    @if (Request.Url.Host != "localhost")
    {
        <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "4b73271c7ec547e2a9ccec95f25bed28"}'></script>
    }
</body>
</html>