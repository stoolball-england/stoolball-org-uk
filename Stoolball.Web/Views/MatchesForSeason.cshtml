@inherits Umbraco.Web.Mvc.UmbracoViewPage<Stoolball.Web.Competitions.SeasonViewModel>
@using Stoolball.Matches
@section head {
    <meta name="robots" content="noindex,follow" />
}

<h1>Matches for @Model.Season.SeasonFullNameAndPlayerType()</h1>

<ul class="nav nav-tabs">
    <li class="nav-item">
        <a class="nav-link" href="@Model.Season.SeasonRoute">Summary</a>
    </li>
    <li class="nav-item">
        <em class="nav-link active">Matches</em>
    </li>
    @if (Model.Season.MatchTypes.Contains(MatchType.LeagueMatch) ||
        Model.Season.MatchTypes.Contains(MatchType.KnockoutMatch) ||
        Model.Season.MatchTypes.Contains(MatchType.FriendlyMatch) ||
        !string.IsNullOrEmpty(Model.Season.Results))
    {
        <li class="nav-item">
            <a class="nav-link" href="@Model.Season.SeasonRoute/results">Results</a>
        </li>
    }
    @if (Model.IsAuthorized)
    {
        <li class="nav-item">
            <a class="nav-link" href="@Model.Season.SeasonRoute/edit">Edit</a>
        </li>
    }
</ul>

@if (Model.Season.MatchTypes.Contains(MatchType.LeagueMatch) || Model.Season.MatchTypes.Contains(MatchType.KnockoutMatch) || Model.Season.MatchTypes.Contains(MatchType.FriendlyMatch) || Model.Season.EnableTournaments)
{
<p>
    @if (Model.Season.MatchTypes.Contains(MatchType.LeagueMatch))
    {
        <a href="@Model.Season.SeasonRoute/matches/add/league" class="btn btn-primary">Add a league match</a>
    }
    @if (Model.Season.MatchTypes.Contains(MatchType.KnockoutMatch))
    {
        <a href="@Model.Season.SeasonRoute/matches/add/knockout" class="btn btn-primary">Add a knockout match</a>
    }
    @if (Model.Season.MatchTypes.Contains(MatchType.FriendlyMatch))
    {
        <a href="@Model.Season.SeasonRoute/matches/add/friendly" class="btn btn-primary">Add a friendly match</a>
    }
    @if (Model.Season.EnableTournaments)
    {
        <a href="@Model.Season.SeasonRoute/matches/add/tournament" class="btn btn-primary">Add a tournament</a>
    }
</p>
}

@if (Model.Matches.Matches.Count > 0)
{
    @Html.Partial("_MatchList", Model.Matches)
}
else
{
    <p>There are no matches for this season.</p>
}