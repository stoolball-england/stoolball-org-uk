@inherits Umbraco.Web.Mvc.UmbracoViewPage<Stoolball.Web.Competitions.SeasonViewModel>
@using ClientDependency.Core.Mvc
@using Stoolball.Matches
@{
    Html.RequiresJs("https://maps.google.co.uk/maps/api/js?key=" + Model.GoogleMapsApiKey, 50);
    Html.RequiresJs("/js/maps.js", 90);
    Html.RequiresJs("/js/libs/markerclustererplus.1.0.3.min.js", 95);
    Html.RequiresJs($"/teams/teams-map.js?season={Model.Season.SeasonId}&adjust=false");
}
<div class="container-xl">
    <h1>@Model.Season.SeasonFullNameAndPlayerType()</h1>

    @if (Model.Season.Competition.UntilYear.HasValue)
    {
        <div class="alert alert-info">
            <p><strong>This competition isn't played any more.</strong></p>
        </div>
    }

    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link" href="@Model.Season.SeasonRoute">Summary</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="@Model.Season.SeasonRoute/matches">Matches</a>
        </li>
        <li class="nav-item">
            <em class="nav-link active">Map</em>
        </li>
        @if (Model.Season.MatchTypes.Contains(MatchType.LeagueMatch) ||
            Model.Season.MatchTypes.Contains(MatchType.KnockoutMatch) ||
            Model.Season.MatchTypes.Contains(MatchType.FriendlyMatch) ||
            !string.IsNullOrEmpty(Model.Season.Results))
        {
            <li class="nav-item">
                <a class="nav-link" href="@Model.Season.SeasonRoute/table">Table</a>
            </li>
        }
        <li class="nav-item">
            <a class="nav-link" href="@Model.Season.SeasonRoute/statistics">Statistics</a>
        </li>
    </ul>

    <div id="map">
        <p class="alert-danger alert">
            <strong>
                You can view teams in this season using Google Maps,
                but we can only show you the map if you <a href="/privacy/cookies/">consent to maps</a>.
            </strong>
        </p>
    </div>
</div>